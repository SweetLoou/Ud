import React, { useState, useEffect } from 'react';
import {
 Shield,
 Globe,
 Layers,
 Users,
 Cpu,
 Zap,
 Check,
 Menu,
 X,
 Fingerprint,
 Lock,
 LayoutGrid,
 ChevronDown,
 ArrowRight,
 Download,
 Terminal,
 Play,
 Settings,
 Plus,
 Search,
 MoreVertical,
 LogOut,
 Monitor,
 Apple,
 Command,
 AlertCircle
} from 'lucide-react';

// --- Shared Components ---

const Logo = () => (
 <div className="flex items-center space-x-2 cursor-pointer">
   <div className="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center">
     <Fingerprint className="text-white w-6 h-6" />
   </div>
   <span className="text-xl font-bold text-white tracking-tight">Navi<span className="text-indigo-500">Browser</span></span>
 </div>
);

// --- Page Components ---

const HomePage = ({ navigateTo }) => {
 const [activeFaq, setActiveFaq] = useState(null);
 const toggleFaq = (index) => setActiveFaq(activeFaq === index ? null : index);

 const plans = [
   {
     name: "Starter",
     price: "29",
     period: "/mo",
     profiles: "10 Browser Profiles",
     features: ["Unique Fingerprints", "Canvas & WebGL Protection", "Proxy Integration", "24/7 Support"],
     isPopular: false
   },
   {
     name: "Agency",
     price: "99",
     period: "/mo",
     profiles: "100 Browser Profiles",
     features: ["Everything in Starter", "Team Collaboration (3 Seats)", "API Access", "Cookie Robot", "Profile Transfer"],
     isPopular: true
   },
   {
     name: "Enterprise",
     price: "249",
     period: "/mo",
     profiles: "Unlimited Profiles",
     features: ["Everything in Agency", "Unlimited Team Seats", "Dedicated Manager", "Custom Fingerprints", "Priority Automation"],
     isPopular: false
   }
 ];

 const faqs = [
   {
     question: "How does NaviBrowser protect my privacy?",
     answer: "NaviBrowser manages your digital fingerprint by isolating cookies, local storage, and cache for each profile. We spoof hardware parameters like Canvas, WebGL, and AudioContext to make each profile look like a distinct, unique device."
   },
   {
     question: "Can I automate browser tasks?",
     answer: "Yes! We support Selenium, Puppeteer, and Playwright integration via our local API, making it perfect for workflow automation and testing."
   },
   {
     question: "Is proxy management included?",
     answer: "We provide seamless integration for HTTP, HTTPS, SOCKS4, and SOCKS5 proxies. You can paste proxies in bulk or buy them directly from our trusted partners within the dashboard."
   },
   {
     question: "Do you offer a free trial?",
     answer: "Yes, we offer a 7-day trial with full access to the Agency plan features so you can test our fingerprinting technology extensively."
   }
 ];

 return (
   <>
     {/* Hero Section */}
     <section className="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden">
       <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-7xl pointer-events-none">
         <div className="absolute top-20 left-20 w-72 h-72 bg-indigo-600/20 rounded-full blur-[100px]"></div>
         <div className="absolute bottom-20 right-20 w-96 h-96 bg-purple-600/10 rounded-full blur-[120px]"></div>
       </div>

       <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
         <div className="inline-flex items-center space-x-2 bg-slate-900/50 border border-slate-800 rounded-full px-4 py-1.5 mb-8 backdrop-blur-sm animate-fade-in-up">
           <span className="flex h-2 w-2 rounded-full bg-green-500"></span>
           <span className="text-sm font-medium text-slate-300">v3.0 is now live with enhanced kernel</span>
         </div>
         
         <h1 className="text-5xl md:text-7xl font-extrabold text-white tracking-tight mb-8">
           The Ultimate Anti-Detect <br className="hidden md:block" />
           <span className="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400">
             Browser Solution
           </span>
         </h1>
         
         <p className="max-w-2xl mx-auto text-xl text-slate-400 mb-10 leading-relaxed">
           Manage hundreds of unique browser profiles from a single dashboard.
           Perfect for affiliate marketing, e-commerce, and digital agencies.
         </p>
         
         <div className="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4">
           <button
             onClick={() => navigateTo('download')}
             className="w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all shadow-xl shadow-indigo-600/20 flex items-center justify-center"
           >
             Download for Windows <ArrowRight className="ml-2 w-5 h-5" />
           </button>
           <button className="w-full sm:w-auto bg-slate-800 hover:bg-slate-700 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all border border-slate-700 flex items-center justify-center">
             View Documentation
           </button>
         </div>

         <div className="mt-12 pt-8 border-t border-slate-800/50 flex flex-wrap justify-center gap-8 opacity-60 grayscale">
           {['GlobalAds', 'MediaScale', 'AffilatePro', 'SecureNet'].map((logo) => (
             <span key={logo} className="text-xl font-bold text-slate-500">{logo}</span>
           ))}
         </div>
       </div>
     </section>

     {/* Features Grid */}
     <section id="features" className="py-24 bg-slate-900/50">
       <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
         <div className="text-center mb-16">
           <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">Built for invisibility</h2>
           <p className="text-slate-400 max-w-2xl mx-auto">
             Our advanced fingerprinting technology ensures each profile appears as a completely distinct physical device.
           </p>
         </div>

         <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
           {[
             {
               icon: <Fingerprint className="w-8 h-8 text-indigo-400" />,
               title: "Digital Fingerprint Mgmt",
               desc: "We alter Canvas, WebGL, Fonts, and Audio context to create a genuine device identity for every profile."
             },
             {
               icon: <Users className="w-8 h-8 text-purple-400" />,
               title: "Team Collaboration",
               desc: "Share profiles securely with team members without sharing passwords. Assign roles and permissions instantly."
             },
             {
               icon: <Cpu className="w-8 h-8 text-blue-400" />,
               title: "Automation Ready",
               desc: "Fully compatible with Puppeteer, Selenium, and Playwright. Build complex workflows via our local API."
             },
             {
               icon: <Shield className="w-8 h-8 text-green-400" />,
               title: "Cookie Management",
               desc: "Import, export, and warm up cookies automatically. Keep sessions active and trusted by platforms."
             },
             {
               icon: <Globe className="w-8 h-8 text-pink-400" />,
               title: "Proxy Integration",
               desc: "Native support for all major proxy protocols. Check proxy health and location directly within the browser."
             },
             {
               icon: <LayoutGrid className="w-8 h-8 text-orange-400" />,
               title: "Intuitive Dashboard",
               desc: "Tag, group, and filter thousands of profiles easily. Bulk actions allow you to manage scale effortlessly."
             }
           ].map((feature, idx) => (
             <div key={idx} className="bg-slate-950 p-8 rounded-2xl border border-slate-800 hover:border-indigo-500/50 transition-all hover:shadow-2xl hover:shadow-indigo-500/10 group">
               <div className="mb-6 p-3 bg-slate-900 rounded-lg w-fit group-hover:bg-slate-800 transition-colors">
                 {feature.icon}
               </div>
               <h3 className="text-xl font-bold text-white mb-3">{feature.title}</h3>
               <p className="text-slate-400 leading-relaxed">
                 {feature.desc}
               </p>
             </div>
           ))}
         </div>
       </div>
     </section>

     {/* Pricing */}
     <section id="pricing" className="py-24 bg-slate-900/30 border-y border-slate-800">
       <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
         <div className="text-center mb-16">
           <h2 className="text-3xl md:text-4xl font-bold text-white mb-4">Simple, Scalable Pricing</h2>
           <p className="text-slate-400">Choose the plan that fits your operation scale.</p>
         </div>

         <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
           {plans.map((plan, idx) => (
             <div key={idx} className={`relative bg-slate-950 rounded-2xl p-8 border ${plan.isPopular ? 'border-indigo-500 shadow-2xl shadow-indigo-500/10' : 'border-slate-800'}`}>
               {plan.isPopular && (
                 <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-indigo-600 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide">
                   Most Popular
                 </div>
               )}
               <h3 className="text-xl font-bold text-white mb-2">{plan.name}</h3>
               <div className="flex items-baseline mb-6">
                 <span className="text-4xl font-extrabold text-white">${plan.price}</span>
                 <span className="text-slate-500 ml-2">{plan.period}</span>
               </div>
               <p className="text-slate-400 mb-6 pb-6 border-b border-slate-800">{plan.profiles}</p>
               <ul className="space-y-4 mb-8">
                 {plan.features.map((feat, fIdx) => (
                   <li key={fIdx} className="flex items-start">
                     <Check className="w-5 h-5 text-indigo-500 mr-3 shrink-0" />
                     <span className="text-sm text-slate-300">{feat}</span>
                   </li>
                 ))}
               </ul>
               <button className={`w-full py-3 rounded-xl font-bold transition-all ${plan.isPopular ? 'bg-indigo-600 hover:bg-indigo-700 text-white' : 'bg-slate-800 hover:bg-slate-700 text-white'}`}>
                 Select {plan.name}
               </button>
             </div>
           ))}
         </div>
       </div>
     </section>

     {/* FAQ */}
     <section className="py-24">
       <div className="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
         <h2 className="text-3xl font-bold text-white text-center mb-12">Frequently Asked Questions</h2>
         <div className="space-y-4">
           {faqs.map((faq, idx) => (
             <div key={idx} className="bg-slate-900 border border-slate-800 rounded-lg overflow-hidden">
               <button
                 onClick={() => toggleFaq(idx)}
                 className="w-full px-6 py-4 flex items-center justify-between text-left focus:outline-none"
               >
                 <span className="font-medium text-slate-200">{faq.question}</span>
                 <ChevronDown className={`w-5 h-5 text-slate-500 transition-transform ${activeFaq === idx ? 'rotate-180' : ''}`} />
               </button>
               {activeFaq === idx && (
                 <div className="px-6 pb-4 text-slate-400 text-sm leading-relaxed border-t border-slate-800/50 pt-4">
                   {faq.answer}
                 </div>
               )}
             </div>
           ))}
         </div>
       </div>
     </section>
   </>
 );
};

const DownloadPage = () => (
 <div className="pt-32 pb-24 min-h-screen">
   <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
     <div className="text-center mb-16">
       <h1 className="text-4xl md:text-5xl font-extrabold text-white mb-6">Download NaviBrowser</h1>
       <p className="text-xl text-slate-400 max-w-2xl mx-auto">
         Choose your operating system to get started. Current version: v3.0.2 (Stable)
       </p>
     </div>

     <div className="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
       {/* Windows */}
       <div className="bg-slate-900 border border-slate-800 rounded-2xl p-8 hover:border-indigo-500 transition-all text-center group">
         <div className="w-16 h-16 bg-blue-600/10 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-blue-600/20 transition-colors">
           <Monitor className="w-8 h-8 text-blue-500" />
         </div>
         <h3 className="text-2xl font-bold text-white mb-2">Windows</h3>
         <p className="text-slate-400 mb-8">Windows 10, 11 (64-bit)</p>
         <button className="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-xl font-bold flex items-center justify-center transition-all">
           <Download className="w-5 h-5 mr-2" /> Download .exe
         </button>
         <div className="mt-4 text-xs text-slate-500">MD5: a8f9...3b21</div>
       </div>

       {/* Mac */}
       <div className="bg-slate-900 border border-slate-800 rounded-2xl p-8 hover:border-indigo-500 transition-all text-center group">
         <div className="w-16 h-16 bg-slate-700/20 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-slate-700/30 transition-colors">
           <Apple className="w-8 h-8 text-white" />
         </div>
         <h3 className="text-2xl font-bold text-white mb-2">macOS</h3>
         <p className="text-slate-400 mb-8">Ventura, Sonoma (Intel & Silicon)</p>
         <div className="space-y-3">
           <button className="w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-bold flex items-center justify-center transition-all border border-slate-700">
             <Download className="w-5 h-5 mr-2" /> Apple Silicon (M1/M2)
           </button>
           <button className="w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-bold flex items-center justify-center transition-all border border-slate-700">
             <Download className="w-5 h-5 mr-2" /> Intel Chip
           </button>
         </div>
       </div>

       {/* Linux */}
       <div className="bg-slate-900 border border-slate-800 rounded-2xl p-8 hover:border-indigo-500 transition-all text-center group">
         <div className="w-16 h-16 bg-yellow-500/10 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-yellow-500/20 transition-colors">
           <Terminal className="w-8 h-8 text-yellow-500" />
         </div>
         <h3 className="text-2xl font-bold text-white mb-2">Linux</h3>
         <p className="text-slate-400 mb-8">Ubuntu 20.04+, Debian, Fedora</p>
         <button className="w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-xl font-bold flex items-center justify-center transition-all border border-slate-700">
           <Download className="w-5 h-5 mr-2" /> Download .AppImage
         </button>
         <div className="mt-4 text-xs text-slate-500">
           Also available via <span className="font-mono text-indigo-400">snap</span>
         </div>
       </div>
     </div>
     
     <div className="max-w-3xl mx-auto mt-20 pt-10 border-t border-slate-800">
       <h3 className="text-xl font-bold text-white mb-4">System Requirements</h3>
       <ul className="space-y-2 text-slate-400">
         <li className="flex items-center"><Check className="w-4 h-4 text-green-500 mr-2" /> 4GB RAM minimum (8GB recommended)</li>
         <li className="flex items-center"><Check className="w-4 h-4 text-green-500 mr-2" /> 1GB free disk space</li>
         <li className="flex items-center"><Check className="w-4 h-4 text-green-500 mr-2" /> Active internet connection for proxy usage</li>
       </ul>
     </div>
   </div>
 </div>
);

const LoginPage = ({ onLogin }) => {
 const [email, setEmail] = useState('');
 const [loading, setLoading] = useState(false);

 const handleSubmit = (e) => {
   e.preventDefault();
   setLoading(true);
   // Simulate API call
   setTimeout(() => {
     setLoading(false);
     onLogin();
   }, 1500);
 };

 return (
   <div className="pt-32 pb-24 min-h-screen flex items-center justify-center">
     <div className="w-full max-w-md p-8 bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl">
       <div className="text-center mb-8">
          <div className="inline-block p-3 bg-indigo-600/10 rounded-xl mb-4">
            <Fingerprint className="w-8 h-8 text-indigo-500" />
          </div>
          <h2 className="text-2xl font-bold text-white">Welcome Back</h2>
          <p className="text-slate-400">Sign in to manage your browser profiles</p>
       </div>

       <form onSubmit={handleSubmit} className="space-y-6">
         <div>
           <label className="block text-sm font-medium text-slate-300 mb-2">Email Address</label>
           <input
             type="email"
             required
             value={email}
             onChange={(e) => setEmail(e.target.value)}
             className="w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-indigo-500 transition-colors"
             placeholder="you@company.com"
           />
         </div>
         <div>
           <label className="block text-sm font-medium text-slate-300 mb-2">Password</label>
           <input
             type="password"
             required
             defaultValue="password"
             className="w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-indigo-500 transition-colors"
             placeholder="••••••••"
           />
         </div>
         
         <button
           type="submit"
           disabled={loading}
           className="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-bold transition-all flex items-center justify-center"
         >
           {loading ? (
             <div className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
           ) : (
             "Sign In to Dashboard"
           )}
         </button>
       </form>
       
       <p className="mt-6 text-center text-sm text-slate-500">
         Don't have an account? <a href="#" className="text-indigo-400 hover:underline">Start Free Trial</a>
       </p>
     </div>
   </div>
 );
};

// --- Mock Dashboard Component ---

const DashboardPage = ({ onLogout }) => {
 const [profiles, setProfiles] = useState([
   { id: 8291, name: "Facebook Ad Account 01", os: "Win 10", browser: "Chrome 118", proxy: "192.168.1.1 (US)", status: "ready" },
   { id: 8292, name: "Google Ads Main", os: "MacOS", browser: "Chrome 119", proxy: "104.22.11.5 (DE)", status: "running" },
   { id: 8293, name: "eBay Merchant Store", os: "Win 11", browser: "Firefox 112", proxy: "45.33.22.11 (UK)", status: "ready" },
   { id: 8294, name: "TikTok Farm #4", os: "Android", browser: "Mobile", proxy: "88.11.22.99 (FR)", status: "error" },
 ]);

 const toggleStatus = (id) => {
   setProfiles(profiles.map(p => {
     if (p.id === id) {
       return { ...p, status: p.status === 'running' ? 'ready' : 'running' };
     }
     return p;
   }));
 };

 return (
   <div className="flex h-screen bg-slate-950 text-slate-200 overflow-hidden">
     {/* Sidebar */}
     <div className="w-64 bg-slate-900 border-r border-slate-800 flex flex-col hidden md:flex">
       <div className="p-6">
         <Logo />
       </div>
       <div className="flex-1 px-4 space-y-2">
         <div className="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2 px-2">Main</div>
         <button className="w-full flex items-center space-x-3 bg-indigo-600/10 text-indigo-400 px-4 py-2.5 rounded-lg font-medium">
           <LayoutGrid size={18} /> <span>Profiles</span>
         </button>
         <button className="w-full flex items-center space-x-3 text-slate-400 hover:text-white hover:bg-slate-800 px-4 py-2.5 rounded-lg transition-colors">
           <Globe size={18} /> <span>Proxies</span>
         </button>
         <button className="w-full flex items-center space-x-3 text-slate-400 hover:text-white hover:bg-slate-800 px-4 py-2.5 rounded-lg transition-colors">
           <Users size={18} /> <span>Team</span>
         </button>
         <button className="w-full flex items-center space-x-3 text-slate-400 hover:text-white hover:bg-slate-800 px-4 py-2.5 rounded-lg transition-colors">
           <Cpu size={18} /> <span>API & Auto</span>
         </button>
       </div>
       <div className="p-4 border-t border-slate-800">
         <button onClick={onLogout} className="flex items-center space-x-3 text-slate-400 hover:text-white w-full px-4 py-2">
           <LogOut size={18} /> <span>Sign Out</span>
         </button>
       </div>
     </div>

     {/* Main Content */}
     <div className="flex-1 flex flex-col overflow-hidden">
       {/* Top Header */}
       <header className="h-16 bg-slate-900/50 border-b border-slate-800 flex items-center justify-between px-6">
         <h2 className="font-semibold text-white">Browser Profiles</h2>
         <div className="flex items-center space-x-4">
           <div className="flex items-center space-x-2 text-sm text-green-400 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20">
             <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
             <span>System Operational</span>
           </div>
           <div className="w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-sm font-bold">
             JD
           </div>
         </div>
       </header>

       {/* Dashboard Content */}
       <div className="flex-1 overflow-auto p-8">
         {/* Actions Bar */}
         <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
            <div className="relative w-full sm:w-96">
              <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 w-5 h-5" />
              <input
                type="text"
                placeholder="Search profiles, tags, or IDs..."
                className="w-full bg-slate-900 border border-slate-800 rounded-lg pl-10 pr-4 py-2.5 text-slate-300 focus:outline-none focus:border-indigo-500"
              />
            </div>
            <button className="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2.5 rounded-lg font-bold flex items-center transition-all shadow-lg shadow-indigo-500/20">
              <Plus className="w-5 h-5 mr-2" /> New Profile
            </button>
         </div>

         {/* Profile Table */}
         <div className="bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-xl">
           <table className="w-full text-left">
             <thead>
               <tr className="bg-slate-950 border-b border-slate-800 text-slate-400 text-sm">
                 <th className="px-6 py-4 font-medium">Profile Name</th>
                 <th className="px-6 py-4 font-medium">Status</th>
                 <th className="px-6 py-4 font-medium hidden md:table-cell">Proxy</th>
                 <th className="px-6 py-4 font-medium hidden md:table-cell">Config</th>
                 <th className="px-6 py-4 font-medium text-right">Actions</th>
               </tr>
             </thead>
             <tbody className="divide-y divide-slate-800">
               {profiles.map((profile) => (
                 <tr key={profile.id} className="hover:bg-slate-800/50 transition-colors group">
                   <td className="px-6 py-4">
                     <div className="flex items-center space-x-3">
                       <div className={`w-2 h-2 rounded-full ${profile.status === 'running' ? 'bg-green-500' : 'bg-slate-600'}`}></div>
                       <div>
                         <div className="font-medium text-white">{profile.name}</div>
                         <div className="text-xs text-slate-500 font-mono">ID: {profile.id}</div>
                       </div>
                     </div>
                   </td>
                   <td className="px-6 py-4">
                     {profile.status === 'running' ? (
                       <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-500/10 text-green-400 border border-green-500/20">
                         Active
                       </span>
                     ) : profile.status === 'error' ? (
                        <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-500/10 text-red-400 border border-red-500/20">
                         Proxy Error
                       </span>
                     ) : (
                       <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-slate-700/50 text-slate-400 border border-slate-700">
                         Stopped
                       </span>
                     )}
                   </td>
                   <td className="px-6 py-4 text-sm text-slate-400 hidden md:table-cell">
                     <div className="flex items-center space-x-2">
                       <Globe size={14} />
                       <span>{profile.proxy}</span>
                     </div>
                   </td>
                   <td className="px-6 py-4 text-sm text-slate-400 hidden md:table-cell">
                     {profile.os} • {profile.browser}
                   </td>
                   <td className="px-6 py-4 text-right">
                     <div className="flex items-center justify-end space-x-3">
                       <button
                         onClick={() => toggleStatus(profile.id)}
                         className={`flex items-center px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${
                           profile.status === 'running'
                           ? 'bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/20'
                           : 'bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-500/10'
                         }`}
                       >
                         {profile.status === 'running' ? 'Stop' : <><Play size={12} className="mr-1.5" /> Launch</>}
                       </button>
                       <button className="text-slate-500 hover:text-white p-1 rounded hover:bg-slate-800">
                         <Settings size={16} />
                       </button>
                     </div>
                   </td>
                 </tr>
               ))}
             </tbody>
           </table>
         </div>
       </div>
     </div>
   </div>
 );
};

// --- Main App Controller ---

const App = () => {
 const [currentPage, setCurrentPage] = useState('home'); // home, download, login, dashboard
 const [isMenuOpen, setIsMenuOpen] = useState(false);
 const [isLoggedIn, setIsLoggedIn] = useState(false);

 // Auto-scroll to top on navigation
 useEffect(() => {
   window.scrollTo(0, 0);
 }, [currentPage]);

 const handleNavigate = (page) => {
   setIsMenuOpen(false);
   
   // Handle hash links if on home page
   if (page.startsWith('#')) {
     if (currentPage !== 'home') {
       setCurrentPage('home');
       setTimeout(() => {
         const element = document.querySelector(page);
         element?.scrollIntoView({ behavior: 'smooth' });
       }, 100);
     } else {
       const element = document.querySelector(page);
       element?.scrollIntoView({ behavior: 'smooth' });
     }
     return;
   }

   setCurrentPage(page);
 };

 const handleLogin = () => {
   setIsLoggedIn(true);
   setCurrentPage('dashboard');
 };

 const handleLogout = () => {
   setIsLoggedIn(false);
   setCurrentPage('login');
 };

 // If on dashboard, render without standard navbar/footer
 if (currentPage === 'dashboard' && isLoggedIn) {
   return <DashboardPage onLogout={handleLogout} />;
 }

 return (
   <div className="min-h-screen bg-slate-950 text-slate-200 font-sans selection:bg-indigo-500/30 flex flex-col">
     
     {/* Navigation */}
     <nav className="fixed w-full z-50 bg-slate-950/80 backdrop-blur-md border-b border-slate-800">
       <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
         <div className="flex items-center justify-between h-20">
           <div onClick={() => handleNavigate('home')}>
              <Logo />
           </div>
           
           <div className="hidden md:block">
             <div className="ml-10 flex items-baseline space-x-8">
               <button onClick={() => handleNavigate('#features')} className="hover:text-white transition-colors">Features</button>
               <button onClick={() => handleNavigate('#use-cases')} className="hover:text-white transition-colors">Use Cases</button>
               <button onClick={() => handleNavigate('#pricing')} className="hover:text-white transition-colors">Pricing</button>
               <button onClick={() => handleNavigate('download')} className={`transition-colors ${currentPage === 'download' ? 'text-indigo-400 font-medium' : 'hover:text-white'}`}>Download</button>
             </div>
           </div>

           <div className="hidden md:flex items-center space-x-4">
             <button onClick={() => handleNavigate('login')} className="text-slate-300 hover:text-white font-medium">Log In</button>
             <button onClick={() => handleNavigate('login')} className="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2.5 rounded-lg font-medium transition-all shadow-lg shadow-indigo-500/20">
               Get Started
             </button>
           </div>

           <div className="md:hidden">
             <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-slate-300 hover:text-white">
               {isMenuOpen ? <X size={28} /> : <Menu size={28} />}
             </button>
           </div>
         </div>
       </div>

       {/* Mobile Menu */}
       {isMenuOpen && (
         <div className="md:hidden bg-slate-900 border-b border-slate-800">
           <div className="px-2 pt-2 pb-3 space-y-1 sm:px-3 flex flex-col">
             <button onClick={() => handleNavigate('#features')} className="block text-left w-full px-3 py-2 rounded-md hover:bg-slate-800">Features</button>
             <button onClick={() => handleNavigate('#pricing')} className="block text-left w-full px-3 py-2 rounded-md hover:bg-slate-800">Pricing</button>
             <button onClick={() => handleNavigate('download')} className="block text-left w-full px-3 py-2 rounded-md hover:bg-slate-800">Download</button>
             <button onClick={() => handleNavigate('login')} className="block text-left w-full px-3 py-2 rounded-md text-indigo-400 font-bold">Log In</button>
           </div>
         </div>
       )}
     </nav>

     <main className="flex-grow">
       {currentPage === 'home' && <HomePage navigateTo={handleNavigate} />}
       {currentPage === 'download' && <DownloadPage />}
       {currentPage === 'login' && <LoginPage onLogin={handleLogin} />}
     </main>

     {/* Footer */}
     <footer className="bg-slate-950 border-t border-slate-800 pt-16 pb-8">
       <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
         <div className="grid grid-cols-2 md:grid-cols-4 gap-8 mb-12">
           <div className="col-span-2 md:col-span-1">
             <div className="flex items-center space-x-2 mb-4">
               <Fingerprint className="text-indigo-500 w-6 h-6" />
               <span className="text-lg font-bold text-white">NaviBrowser</span>
             </div>
             <p className="text-sm text-slate-500">
               The most advanced anti-detect browser for managing multiple accounts with safety and ease.
             </p>
           </div>
           <div>
             <h4 className="font-bold text-white mb-4">Product</h4>
             <ul className="space-y-2 text-sm text-slate-400">
               <li><button onClick={() => handleNavigate('download')} className="hover:text-indigo-400">Download</button></li>
               <li><button onClick={() => handleNavigate('#pricing')} className="hover:text-indigo-400">Pricing</button></li>
               <li><button className="hover:text-indigo-400">API Docs</button></li>
               <li><button className="hover:text-indigo-400">Changelog</button></li>
             </ul>
           </div>
           <div>
             <h4 className="font-bold text-white mb-4">Resources</h4>
             <ul className="space-y-2 text-sm text-slate-400">
               <li><button className="hover:text-indigo-400">Blog</button></li>
               <li><button className="hover:text-indigo-400">Proxy Checker</button></li>
               <li><button className="hover:text-indigo-400">Community</button></li>
               <li><button className="hover:text-indigo-400">Help Center</button></li>
             </ul>
           </div>
           <div>
             <h4 className="font-bold text-white mb-4">Legal</h4>
             <ul className="space-y-2 text-sm text-slate-400">
               <li><button className="hover:text-indigo-400">Privacy Policy</button></li>
               <li><button className="hover:text-indigo-400">Terms of Service</button></li>
               <li><button className="hover:text-indigo-400">Refund Policy</button></li>
             </ul>
           </div>
         </div>
         <div className="text-center text-sm text-slate-600 pt-8 border-t border-slate-900">
           © {new Date().getFullYear()} NaviBrowser Inc. All rights reserved.
         </div>
       </div>
     </footer>
   </div>
 );
};

export default App;
